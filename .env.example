# =====================================================
# SARAMEDICO BACKEND - ENVIRONMENT CONFIGURATION
# =====================================================
# Copy this file to .env and update values as needed
# DO NOT commit .env to version control
# =====================================================

# =====================================================
# APPLICATION SETTINGS
# =====================================================
APP_NAME=Saramedico
APP_ENV=development
APP_DEBUG=true
APP_VERSION=1.0.0

# Security Keys (Generate unique keys for production!)
# Python: import secrets; secrets.token_urlsafe(32)
APP_SECRET_KEY=your-super-secret-key-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Encryption Key for PII (Generate with: from cryptography.fernet import Fernet; Fernet.generate_key())
ENCRYPTION_KEY=your-fernet-encryption-key-change-in-production

# =====================================================
# API CONFIGURATION
# =====================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_V1_PREFIX=/api/v1

# CORS Configuration (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
LOGIN_RATE_LIMIT_PER_MINUTE=5

# File Upload Limits
MAX_UPLOAD_SIZE_MB=100
ALLOWED_FILE_EXTENSIONS=pdf,jpg,jpeg,png,gif,wav,mp3,m4a,webm,dicom,docx,txt

# =====================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =====================================================
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=saramedico_dev
DATABASE_USER=saramedico_user
DATABASE_PASSWORD=your-database-password-change-in-production

# Full Database URL (Used in Docker Compose)
# For local dev: postgresql+asyncpg://saramedico_user:your-password@localhost:5435/saramedico_dev
# For Docker: postgresql+asyncpg://saramedico_user:your-password@postgres:5432/saramedico_dev
DATABASE_URL=postgresql+asyncpg://saramedico_user:your-database-password-change-in-production@postgres:5432/saramedico_dev
TEST_DATABASE_URL=postgresql+asyncpg://saramedico_user:your-database-password-change-in-production@postgres:5432/saramedico_test

# Connection Pool Settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# =====================================================
# REDIS CONFIGURATION
# =====================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-change-in-production
REDIS_URL=redis://:your-password@redis:6379/0

# Redis Database Indices
REDIS_DB_CACHE=0
REDIS_DB_SESSIONS=1
REDIS_DB_CELERY=2

# =====================================================
# MINIO (S3-COMPATIBLE LOCAL STORAGE)
# =====================================================
MINIO_ENDPOINT=minio:9000
MINIO_ROOT_USER=saramedico_minio_admin
MINIO_ROOT_PASSWORD=your-minio-password-change-in-production
MINIO_USE_SSL=false
MINIO_CONSOLE_PORT=9001

# Bucket Names
MINIO_BUCKET_UPLOADS=saramedico-uploads
MINIO_BUCKET_DOCUMENTS=saramedico-documents
MINIO_BUCKET_AUDIO=saramedico-audio
MINIO_BUCKET_AVATARS=saramedico-avatars

# Presigned URL Expiry (seconds)
PRESIGNED_URL_EXPIRY=3600

# =====================================================
# EMAIL CONFIGURATION (MailHog for Development)
# =====================================================
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@saramedico.local
SMTP_FROM_NAME=Saramedico Platform
SMTP_TLS=false
SMTP_SSL=false

# Email Templates
EMAIL_VERIFICATION_TEMPLATE=verify_email
EMAIL_PASSWORD_RESET_TEMPLATE=password_reset
EMAIL_INVITATION_TEMPLATE=invitation

# =====================================================
# CELERY CONFIGURATION (Background Tasks)
# =====================================================
CELERY_BROKER_URL=redis://:your-password@redis:6379/2
CELERY_RESULT_BACKEND=redis://:your-password@redis:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=1800

# =====================================================
# MFA / 2FA CONFIGURATION
# =====================================================
MFA_ENABLED=true
MFA_ISSUER_NAME=Saramedico
TOTP_SECRET_LENGTH=32
OTP_EXPIRY_SECONDS=300
OTP_RESEND_COOLDOWN_SECONDS=60
OTP_MAX_ATTEMPTS=5

# =====================================================
# AUDIT LOGGING
# =====================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555
AUDIT_LOG_PHI_EVENTS=view,edit,download,export,delete

# =====================================================
# SESSION MANAGEMENT
# =====================================================
SESSION_EXPIRY_HOURS=24
MAX_CONCURRENT_SESSIONS=5
SESSION_IDLE_TIMEOUT_MINUTES=30

# =====================================================
# SUBSCRIPTION & BILLING (Stripe - Credentials from Admin)
# =====================================================
# These will be provided when we reach Phase 6
# STRIPE_SECRET_KEY=sk_test_xxxxx
# STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx
# STRIPE_PRODUCT_STANDARD=price_xxxxx
# STRIPE_PRODUCT_PREMIUM=price_xxxxx
# STRIPE_PRODUCT_CLINIC=price_xxxxx

# Trial Configuration
TRIAL_DURATION_DAYS=10
TRIAL_PATIENTS_LIMIT=10
TRIAL_STORAGE_LIMIT_MB=500

# =====================================================
# SMS NOTIFICATIONS (Twilio - Credentials from Admin)
# =====================================================
# These will be provided when we reach Phase 6
# TWILIO_ACCOUNT_SID=ACxxxxx
# TWILIO_AUTH_TOKEN=xxxxx
# TWILIO_PHONE_NUMBER=+1234567890
# TWILIO_VERIFY_SERVICE_SID=VAxxxxx

# =====================================================
# VIDEO CONSULTATION (Zoom API - Credentials from Admin)
# =====================================================
# These will be provided when we reach Phase 5
# ZOOM_ACCOUNT_ID=xxxxx
# ZOOM_CLIENT_ID=xxxxx
# ZOOM_CLIENT_SECRET=xxxxx
# ZOOM_WEBHOOK_SECRET_TOKEN=xxxxx
# ZOOM_MEETING_TYPE=2
# ZOOM_AUTO_RECORDING=cloud
# ZOOM_WAITING_ROOM=true

# =====================================================
# AWS CONFIGURATION (Production - Credentials from Admin)
# =====================================================
# These will be provided when we reach Phase 9
# AWS_ACCESS_KEY_ID=AKIAxxxxx
# AWS_SECRET_ACCESS_KEY=xxxxx
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=saramedico-prod-uploads
# AWS_KMS_KEY_ID=arn:aws:kms:us-east-1:xxxxx

# =====================================================
# LOGGING CONFIGURATION
# =====================================================
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_FILE_PATH=logs/saramedico.log
LOG_MAX_SIZE_MB=50
LOG_BACKUP_COUNT=10

# =====================================================
# FEATURE FLAGS
# =====================================================
FEATURE_AI_ANALYSIS=false
FEATURE_VIDEO_CALLS=false
FEATURE_SMS_NOTIFICATIONS=false
FEATURE_REAL_EMAIL=false
FEATURE_CLOUD_STORAGE=false
